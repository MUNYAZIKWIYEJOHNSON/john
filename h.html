<!DOCTYPE html>
<html lang="rw">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNEAK-PEAK | Inkweto zigezweho</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #4f46e5;
            --dark: #0f172a;
            --light: #f8fafc;
            --accent: #ff4757;
            --gray: #64748b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light);
            color: var(--dark);
            overflow-x: hidden;
        }

        /* --- NAVIGATION --- */
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 8%;
            background: white;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .logo {
            font-family: 'Montserrat', sans-serif;
            font-size: 24px;
            font-weight: 800;
            color: var(--dark);
            text-decoration: none;
            letter-spacing: -1px;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 30px;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            font-size: 15px;
            transition: 0.3s;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .cart-box {
            position: relative;
            cursor: pointer;
            font-size: 20px;
        }

        /* --- HERO SECTION --- */
  .hero {
            display: flex;
            align-items: center;
            min-height: 80vh;
            padding: 0 8%;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            overflow: hidden;
        }

        .hero-content { flex: 1; z-index: 2; }
        .hero-content h1 { font-family: 'Montserrat'; font-size: clamp(2.5rem, 6vw, 4rem); line-height: 1.1; margin: 20px 0; }


        .btn-group {
            display: flex;
            gap: 15px;
        }

        .btn {
            padding: 15px 35px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 700;
            transition: 0.3s;
            border: none;
            cursor: pointer;
        }

        .btn-dark {
            background: var(--dark);
            color: white;
        }

        .btn-dark:hover {
            background: var(--primary);
            transform: translateY(-3px);
        }

        .hero-image {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .shoe-img {
            width: 130%;
            transform: rotate(-25deg);
            filter: drop-shadow(20px 30px 50px rgba(0,0,0,0.2));
            animation: float 4s infinite ease-in-out;
            z-index: 2;
        }

        .circle-bg {
            position: absolute;
            width: 500px;
            height: 500px;
            background: var(--primary);
            border-radius: 50%;
            opacity: 0.1;
            filter: blur(80px);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(-25deg); }
            50% { transform: translateY(-30px) rotate(-20deg); }
        }

        /* Responsive */
        @media (max-width: 968px) {
            .hero { flex-direction: column; text-align: center; padding-top: 50px; }
            .hero-content p { margin: 0 auto 30px; }
            .btn-group { justify-content: center; }
            .shoe-img { width: 100%; margin-top: 50px; }
            .nav-links { display: none; }
        }
        
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .view-all-btn {
        display: inline-flex;
        align-items: center;
        padding: 12px 30px;
        background: white;
        color: var(--dark);
        border: 2px solid var(--dark);
        border-radius: 50px;
        text-decoration: none;
        font-weight: 700;
        transition: 0.3s;
    }
    .view-all-btn:hover {
        background: var(--dark);
        color: white;
    }
    
    /* Kosora Filter Container */
    .filter-container {
        margin-bottom: 40px;
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        align-items: center;
        justify-content: space-between; /* Byari byanditse nabi */
    }

    </style>
</head>
<body>

    <nav>
    <a href="#" class="logo">SNEAK<span style="color:var(--primary)">PEAK</span></a>
    <ul class="nav-links">
        <li><a href="#">Inkweto Nshya</a></li>
        <li><a href="#">Abagabo</a></li>
        <li><a href="#">Abagore</a></li>
    </ul>
    <div class="cart-box" id="cartToggle" style="position: relative; cursor: pointer; font-size: 24px;">
        üõí <span id="cartCount" style="font-size: 12px; background: var(--accent); color: white; padding: 2px 7px; border-radius: 50%; position: absolute; top: -5px; right: -10px; font-weight: 700;">0</span>
    </div>
</nav>

<aside id="cartSidebar" style="position: fixed; top: 0; right: -400px; width: 350px; height: 100%; background: white; z-index: 2000; box-shadow: -10px 0 30px rgba(0,0,0,0.1); transition: 0.4s ease; display: flex; flex-direction: column;">
    <div style="padding: 25px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center;">
        <h2 style="font-family: 'Montserrat'; font-size: 1.2rem;">Ikarita yawe (<span id="cartTotalItems">0</span>)</h2>
        <button id="closeCart" style="background: none; border: none; font-size: 24px; cursor: pointer;">‚úï</button>
    </div>
    
    <div id="cartItemsList" style="flex: 1; overflow-y: auto; padding: 20px;">
        <p id="emptyMsg" style="text-align: center; color: var(--gray); margin-top: 50px;">Ikarita irimo ubusa.</p>
    </div>

    <div style="padding: 25px; border-top: 1px solid #eee; background: #f8fafc;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 20px; font-weight: 700; font-size: 1.1rem;">
            <span>Total:</span>
            <span id="cartTotalPrice">0 RWF</span>
        </div>
        <button style="width: 100%; padding: 15px; background: var(--dark); color: white; border: none; border-radius: 12px; font-weight: 700; cursor: pointer;">Komeza Kwishyura</button>
    </div>
</aside>

<div id="overlay" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1500; display: none;"></div>

    <section class="hero">
        <div class="circle-bg"></div>
        <div class="hero-content">
            <span>Limitless Comfort</span>
            <h1>NIKE AIR <br> <span style="color: var(--primary);">MAX 270</span></h1>
            <p>Inkweto nziza cyane, zoroshye mu birenge kandi zigezweho. Zatuma ugenda wishimye umunsi wose.</p>
            <div class="btn-group">
                <a href="#" class="btn btn-dark">Gura ubu</a>
                <a href="#" class="btn" style="border: 2px solid var(--dark); color: var(--dark);">Ibisobanuro</a>
            </div>
        </div>
        <div class="hero-image">
            <img src="she.webp" alt="Nike Shoe" class="shoe-img">
        </div>
    </section>

    <section class="container" style="padding: 80px 8%;">
        <div style="display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 40px;">
            <div>
                <span style="color: var(--primary); font-weight: 700; text-transform: uppercase; font-size: 13px;">Our Top Picks</span>
                <h2 style="font-family: 'Montserrat', sans-serif; font-size: 2.5rem; color: var(--dark);">Inkweto Zigezweho</h2>
            <div style="text-align: center; margin-top: 50px;">
    <a href="#" class="view-all-btn">
        Reba zose 
        <span class="arrow">‚Üí</span>
    </a>
</div>

<style>
  .loader {
    border: 3px solid #f3f3f3;
    border-top: 3px solid var(--primary);
    border-radius: 50%;
    width: 15px;
    height: 15px;
    animation: spin 1s linear infinite;
    display: inline-block;
    margin-left: 10px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>
<div class="filter-container" style="margin-bottom: 40px; display: flex; flex-wrap: wrap; gap: 20px; align-items: center; justify-content:Âª∫ËÆæ-between;">
    
    <div style="position: relative; flex: 1; min-width: 300px;">
        <span style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #94a3b8;">üîç</span>
        <input type="text" id="searchInput" onkeyup="filterShoes()" placeholder="Shaka izina ry'urukweto (urugero: Nike)..." 
        style="width: 100%; padding: 15px 15px 15px 45px; border-radius: 12px; border: 1px solid #e2e8f0; font-family: 'Poppins'; font-size: 15px; outline: none; transition: 0.3s;"
        onfocus="this.style.borderColor='var(--primary)'; this.style.boxShadow='0 0 0 4px rgba(79, 70, 229, 0.1)'"
        onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
    </div>

    <div style="display: flex; gap: 10px;">
        <button class="filter-btn active" onclick="filterCategory('all', this)">Zose</button>
        <button class="filter-btn" onclick="filterCategory('Nike', this)">Nike</button>
        <button class="filter-btn" onclick="filterCategory('Adidas', this)">Adidas</button>
        <button class="filter-btn" onclick="filterCategory('Vans', this)">Vans</button>
    </div>
</div>

<style>
    .filter-btn {
        padding: 10px 20px;
        border-radius: 50px;
        border: 1px solid #e2e8f0;
        background: white;
        color: var(--dark);
        font-weight: 600;
        cursor: pointer;
        transition: 0.3s;
    }
    .filter-btn:hover {
        border-color: var(--primary);
        color: var(--primary);
    }
    .filter-btn.active {
        background: var(--dark);
        color: white;
        border-color: var(--dark);
    }
</style>
<a href="https://wa.me/250780000000?text=Muraho!%20Nshaka%20kubaza%20ku%20nkweto%20mufite." 
   class="whatsapp-float" 
   target="_blank"
   id="whatsappLink">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
    <span class="tooltip">Tubaze kuri WhatsApp</span>
</a>

<style>
    .whatsapp-float {
        position: fixed;
        bottom: 30px;
        left: 30px; /* Ibumoso kugira ngo bidahurira na Cart Sidebar */
        background-color: #25d366;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 10px 25px rgba(37, 211, 102, 0.3);
        z-index: 5000;
        transition: all 0.3s ease;
        text-decoration: none;
    }

    .whatsapp-float img {
        width: 35px;
        height: 35px;
    }

    .whatsapp-float:hover {
        transform: scale(1.1) rotate(10deg);
        background-color: #20ba5a;
    }

    /* Tooltip */
    .tooltip {
        position: absolute;
        left: 75px;
        background: #0f172a;
        color: white;
        padding: 8px 15px;
        border-radius: 8px;
        font-size: 13px;
        white-space: nowrap;
        opacity: 0;
        visibility: hidden;
        transition: 0.3s;
    }

    .whatsapp-float:hover .tooltip {
        opacity: 1;
        visibility: visible;
    }

    /* Animation yo gutera (Pulse) */
    .whatsapp-float::before {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        background-color: #25d366;
        border-radius: 50%;
        z-index: -1;
        animation: pulse 2s infinite;
    }

    @keyframes pulse {
        0% { transform: scale(1); opacity: 0.5; }
        100% { transform: scale(1.6); opacity: 0; }
    }
</style>
        <div class="product-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px;">
            
            <div class="product-card">
                <div class="img-container">
                    <div class="badge">New</div>
                    <img src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=600&auto=format&fit=crop" alt="Shoe 1">
                    <button class="add-btn">Add to Cart</button>
                </div>
                <div class="info">
                    <h3>Nike Air Jordan</h3>
                    <p>Sport Edition - Red/Black</p>
                    <div class="price">120,000 RWF</div>
                </div>
            </div>

            <div class="product-card">
                <div class="img-container">
                    <img src="https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?q=80&w=600&auto=format&fit=crop" alt="Shoe 2">
                    <button class="add-btn">Add to Cart</button>
                </div>
                <div class="info">
                    <h3>Adidas Cloudfoam</h3>
                    <p>Running Essentials - White</p>
                    <div class="price">85,000 RWF</div>
                </div>
            </div>

            <div class="product-card">
                <div class="img-container">
                    <div class="badge" style="background: var(--accent);">-20%</div>
                    <img src="https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?q=80&w=600&auto=format&fit=crop" alt="Shoe 3">
                    <button class="add-btn">Add to Cart</button>
                </div>
                <div class="info">
                    <h3>Vans Old Skool</h3>
                    <p>Classic Streetwear</p>
                    <div class="price">45,000 RWF <span style="text-decoration: line-through; color: #94a3b8; font-size: 0.9rem;">55,000</span></div>
                </div>
            </div>

            <div class="product-card">
                <div class="img-container">
                    <img src="https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?q=80&w=600&auto=format&fit=crop" alt="Shoe 4">
                    <button class="add-btn">Add to Cart</button>
                </div>
                <div class="info">
                    <h3>Nike Zoom Strike</h3>
                    <p>Performance Green</p>
                    <div class="price">95,000 RWF</div>
                </div>
            </div>

        </div>
    </section>
    <div id="checkoutModal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 800px; background: white; z-index: 3000; border-radius: 24px; box-shadow: 0 30px 60px rgba(0,0,0,0.3); display: none; overflow: hidden; font-family: 'Poppins', sans-serif;">
    <div style="display: flex; flex-wrap: wrap; height: 100%;">
        
        <div style="flex: 1; padding: 40px; background: #f8fafc; min-width: 300px;">
            <h2 style="font-family: 'Montserrat'; margin-bottom: 25px;">Ibisobanuro</h2>
            <div id="checkoutItems" style="max-height: 300px; overflow-y: auto; margin-bottom: 20px;">
                </div>
            <div style="border-top: 2px dashed #cbd5e1; padding-top: 20px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <span style="color: #64748b;">Subtotal:</span>
                    <span id="subtotalPrice">0 RWF</span>
                </div>
                <div style="display: flex; justify-content: space-between; font-weight: 800; font-size: 1.3rem; color: var(--primary);">
                    <span>Total:</span>
                    <span id="finalPrice">0 RWF</span>
                </div>
            </div>
        </div>

        <div style="flex: 1.2; padding: 40px; min-width: 300px; position: relative;">
            <button onclick="closeCheckout()" style="position: absolute; top: 20px; right: 20px; background: none; border: none; font-size: 20px; cursor: pointer;">‚úï</button>
            <h2 style="font-family: 'Montserrat'; margin-bottom: 25px;">Kwishyura</h2>
            
            <form id="paymentForm">
                <label style="display: block; margin-bottom: 8px; font-size: 14px; font-weight: 600;">Izina ryose</label>
                <input type="text" placeholder="Urugero: Keza Alice" style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 15px;" required>

                <label style="display: block; margin-bottom: 8px; font-size: 14px; font-weight: 600;">Numero ya Telefone (MoMo)</label>
                <input type="tel" placeholder="078... cyangwa 072..." style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 15px;" required>

                <label style="display: block; margin-bottom: 10px; font-size: 14px; font-weight: 600;">Uburyo bwo kwishyura</label>
                <div style="display: flex; gap: 10px; margin-bottom: 25px;">
                    <div style="flex: 1; border: 2px solid var(--primary); padding: 10px; border-radius: 10px; text-align: center; cursor: pointer;">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/MTN_Logo.svg/1200px-MTN_Logo.svg.png" style="height: 20px;">
                    </div>
                    <div style="flex: 1; border: 1px solid #ddd; padding: 10px; border-radius: 10px; text-align: center; cursor: pointer; opacity: 0.5;">
                        üí≥ Card
                    </div>
                </div>

                <button type="submit" style="width: 100%; padding: 16px; background: var(--primary); color: white; border: none; border-radius: 12px; font-weight: 700; font-size: 16px; cursor: pointer; transition: 0.3s;">Emeza Kwishyura</button>
            </form>
        </div>
    </div>
</div>
<div id="receiptModal" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90%; max-width: 500px; background: white; z-index: 4000; border-radius: 20px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); display: none; padding: 40px; font-family: 'Poppins', sans-serif; text-align: center;">
    <div style="width: 80px; height: 80px; background: #10b981; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 40px; margin: 0 auto 20px;">
        ‚úì
    </div>
    <h2 style="font-family: 'Montserrat'; color: #0f172a;">Murakoze Gukura!</h2>
    <p style="color: #64748b; margin-bottom: 25px;">Kwishyura byagenze neza. Invoisi yawe n'iyi:</p>
    
    <div id="receiptDetails" style="background: #f8fafc; padding: 20px; border-radius: 12px; text-align: left; margin-bottom: 25px; border: 1px dashed #cbd5e1;">
        </div>

    <button onclick="closeReceipt()" style="width: 100%; padding: 15px; background: var(--dark); color: white; border: none; border-radius: 10px; font-weight: 700; cursor: pointer;">Funga</button>
    <p style="margin-top: 15px; font-size: 12px; color: #94a3b8;">Order ID: <span id="orderId"></span></p>
</div>
    <style>
        .product-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            transition: 0.3s;
            border: 1px solid #f1f5f9;
        }

        .img-container {
            background: #f8fafc;
            height: 280px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 20px;
        }

        .img-container img {
            max-width: 100%;
            transition: 0.5s;
        }

        .badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: var(--primary);
            color: white;
            padding: 4px 12px;
            border-radius: 50px;
            font-size: 12px;
            font-weight: 700;
            z-index: 5;
        }

        .add-btn {
            position: absolute;
            bottom: -50px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--dark);
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
            opacity: 0;
            width: 80%;
        }

        .product-card:hover {
            box-shadow: 0 20px 40px rgba(0,0,0,0.08);
            transform: translateY(-5px);
        }

        .product-card:hover .img-container img {
            transform: scale(1.1) rotate(-5deg);
        }

        .product-card:hover .add-btn {
            bottom: 20px;
            opacity: 1;
        }

        .info {
            padding: 20px;
        }

        .info h3 {
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: var(--dark);
        }

        .info p {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .price {
            font-weight: 800;
            color: var(--primary);
            font-size: 1.1rem;
        }
    </style>
<script>
    let cart = [];
    const cartSidebar = document.getElementById('cartSidebar');
    const overlay = document.getElementById('overlay');
    const cartCount = document.getElementById('cartCount');
    const cartItemsList = document.getElementById('cartItemsList');
    const cartTotalPrice = document.getElementById('cartTotalPrice');
    const cartTotalItems = document.getElementById('cartTotalItems');

    // 1. Gufungura no gufunga Sidebar
    document.getElementById('cartToggle').onclick = () => {
        cartSidebar.style.right = '0';
        overlay.style.display = 'block';
    }

    document.getElementById('closeCart').onclick = () => {
        cartSidebar.style.right = '-400px';
        overlay.style.display = 'none';
    }

    overlay.onclick = () => {
        cartSidebar.style.right = '-400px';
        overlay.style.display = 'none';
    }

    // 2. Toingera urukweto mu ikarita
    document.querySelectorAll('.add-btn').forEach(button => {
        button.onclick = (e) => {
            const card = e.target.closest('.product-card');
            const shoe = {
                id: Date.now(),
                name: card.querySelector('h3').innerText,
                price: parseInt(card.querySelector('.price').innerText.replace(/[^0-9]/g, '')),
                img: card.querySelector('img').src
            };
            
            cart.push(shoe);
            updateUI();
            
            // Notification yoroheje
            e.target.innerText = "Yagezemo! ‚úÖ";
            e.target.style.background = "#10b981";
            setTimeout(() => {
                e.target.innerText = "Add to Cart";
                e.target.style.background = "var(--dark)";
            }, 1500);
        }
    });

    // 3. Kuvugurura Isura ya Cart
    function updateUI() {
        cartCount.innerText = cart.length;
        cartTotalItems.innerText = cart.length;
        
        if (cart.length === 0) {
            cartItemsList.innerHTML = '<p style="text-align: center; color: var(--gray); margin-top: 50px;">Ikarita irimo ubusa.</p>';
            cartTotalPrice.innerText = '0 RWF';
            return;
        }

        cartItemsList.innerHTML = '';
        let total = 0;

        cart.forEach((item, index) => {
            total += item.price;
            cartItemsList.innerHTML += `
                <div style="display: flex; gap: 15px; margin-bottom: 20px; align-items: center; background: #fdfdfd; padding: 10px; border-radius: 10px;">
                    <img src="${item.img}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px;">
                    <div style="flex: 1;">
                        <h4 style="font-size: 14px; margin: 0;">${item.name}</h4>
                        <p style="font-size: 13px; color: var(--primary); font-weight: 700; margin: 5px 0 0 0;">${item.price.toLocaleString()} RWF</p>
                    </div>
                    <button onclick="removeItem(${index})" style="background: none; border: none; color: #ff4757; cursor: pointer; font-weight: bold;">‚úï</button>
                </div>
            `;
        });
        cartTotalPrice.innerText = total.toLocaleString() + ' RWF';
    }

    function removeItem(index) {
        cart.splice(index, 1);
        updateUI();
    }
    // Function yo gufungura Checkout
function openCheckout() {
    if (cart.length === 0) {
        alert("Ikarita irimo ubusa! Banze utoranye inkweto.");
        return;
    }

    // Funga Sidebar
    document.getElementById('cartSidebar').style.right = '-400px';
    
    // Fungura Checkout Modal
    const modal = document.getElementById('checkoutModal');
    const overlay = document.getElementById('overlay');
    modal.style.display = 'block';
    overlay.style.display = 'block';

    // Shyiramo amakuru y'ibyo aguze
    const list = document.getElementById('checkoutItems');
    list.innerHTML = '';
    let total = 0;

    cart.forEach(item => {
        total += item.price;
        list.innerHTML += `
            <div style="display: flex; justify-content: space-between; margin-bottom: 15px; font-size: 14px;">
                <span>${item.name}</span>
                <span style="font-weight: 700;">${item.price.toLocaleString()} RWF</span>
            </div>
        `;
    });

    document.getElementById('subtotalPrice').innerText = total.toLocaleString() + ' RWF';
    document.getElementById('finalPrice').innerText = total.toLocaleString() + ' RWF';
}

function closeCheckout() {
    document.getElementById('checkoutModal').style.display = 'none';
    document.getElementById('overlay').style.display = 'none';
}

// Huza akabuto ka "Komeza Kwishyura" na function yo gufungura Checkout
document.querySelector('#cartSidebar button[style*="background: var(--dark)"]').onclick = openCheckout;

// Success Message iyo amaze kwishyura
document.getElementById('paymentForm').onsubmit = (e) => {
    e.preventDefault();
    alert("Murakoze! Kwishyura byagenze neza. Inkweto zanyu ziri mu nzira.");
    cart = []; // Sukura ikarita
    updateUI();
    closeCheckout();
};
// Function yo kwerekana Fagitire
function showReceipt() {
    const modal = document.getElementById('receiptModal');
    const details = document.getElementById('receiptDetails');
    const orderId = document.getElementById('orderId');
    
    // Genereta Order ID itunguranye
    orderId.innerText = "SPK-" + Math.floor(Math.random() * 1000000);

    let total = 0;
    let itemsHTML = "";
    
    cart.forEach(item => {
        total += item.price;
        itemsHTML += `<div style="display:flex; justify-content:space-between; font-size:13px; margin-bottom:5px;">
                        <span>${item.name}</span>
                        <span>${item.price.toLocaleString()} RWF</span>
                      </div>`;
    });

    details.innerHTML = `
        <div style="border-bottom: 1px solid #ddd; margin-bottom: 10px; padding-bottom: 10px;">
            ${itemsHTML}
        </div>
        <div style="display:flex; justify-content:space-between; font-weight:800; font-size:16px;">
            <span>TOTAL</span>
            <span style="color:var(--primary);">${total.toLocaleString()} RWF</span>
        </div>
    `;

    modal.style.display = 'block';
}

function closeReceipt() {
    document.getElementById('receiptModal').style.display = 'none';
    document.getElementById('overlay').style.display = 'none';
    window.location.reload(); // Refresh urubuga ngo ikarita isubire ku busa
}

// Kuvugurura submit ya paymentForm
document.getElementById('paymentForm').onsubmit = (e) => {
    e.preventDefault();
    document.getElementById('checkoutModal').style.display = 'none';
    showReceipt();
};
// Inkweto nshya ziziyongeraho
const extraShoes = [
    { name: "Puma RS-X", price: 110000, img: "https://images.unsplash.com/photo-1584735175315-9d58238a06cf?q=80&w=600&auto=format&fit=crop", desc: "Retro Tech - Blue" },
    { name: "Reebok Classic", price: 75000, img: "https://images.unsplash.com/photo-1539185441755-769473a23570?q=80&w=600&auto=format&fit=crop", desc: "Timeless White" },
    { name: "New Balance 574", price: 95000, img: "https://images.unsplash.com/photo-1531310197839-ccf54634509e?q=80&w=600&auto=format&fit=crop", desc: "Grey Comfort" }
];

function loadMoreShoes() {
    const grid = document.querySelector('.product-grid');
    const viewAllBtn = document.querySelector('.view-all-btn');

    // Hindura akabuto kerekane ko birimo kwitegura (Loading)
    viewAllBtn.innerHTML = 'Biraza... <div class="loader"></div>';
    viewAllBtn.style.pointerEvents = 'none';

    setTimeout(() => {
        extraShoes.forEach(shoe => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';
            
            card.innerHTML = `
                <div class="img-container">
                    <img src="${shoe.img}" alt="${shoe.name}">
                    <button class="add-btn" onclick="addToCartFromNew('${shoe.name}', ${shoe.price}, '${shoe.img}', this)">Add to Cart</button>
                </div>
                <div class="info">
                    <h3>${shoe.name}</h3>
                    <p>${shoe.desc}</p>
                    <div class="price">${shoe.price.toLocaleString()} RWF</div>
                </div>
            `;
            
            grid.appendChild(card);
            
            // Animation yo kuzana card nshya buhoro buhoro
            setTimeout(() => {
                card.style.transition = '0.5s';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, 100);
        });

        // Hisha button nyuma yo kuzana izindi nkweto
        viewAllBtn.style.display = 'none';
    }, 800);
}

// Function nshya yo kongera mu ikarita ku nkweto zizanywe na Load More
function addToCartFromNew(name, price, img, btn) {
    const shoe = { id: Date.now(), name, price, img };
    cart.push(shoe);
    updateUI();
    
    btn.innerText = "Yagezemo! ‚úÖ";
    btn.style.background = "#10b981";
    btn.style.opacity = "1";
    btn.style.bottom = "20px";
    
    setTimeout(() => {
        btn.innerText = "Add to Cart";
        btn.style.background = "var(--dark)";
    }, 1500);
}

// Huza akabuto na function
document.querySelector('.view-all-btn').onclick = (e) => {
    e.preventDefault();
    loadMoreShoes();
};

// 1. Filter by Text (Search)
function filterShoes() {
    let input = document.getElementById('searchInput').value.toLowerCase();
    let cards = document.querySelectorAll('.product-card');

    cards.forEach(card => {
        let title = card.querySelector('h3').innerText.toLowerCase();
        let desc = card.querySelector('p').innerText.toLowerCase();
        
        if (title.includes(input) || desc.includes(input)) {
            card.style.display = "block";
            // Gukora animation yoroheje igihe zigarutse
            card.style.animation = "fadeIn 0.4s ease forwards";
        } else {
            card.style.display = "none";
        }
    });
}

// 2. Filter by Category Button
function filterCategory(category, btn) {
    // Hindura imiterere ya button yakanzweho
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');

    let cards = document.querySelectorAll('.product-card');
    
    cards.forEach(card => {
        let title = card.querySelector('h3').innerText;
        
        if (category === 'all' || title.includes(category)) {
            card.style.display = "block";
            card.style.animation = "fadeIn 0.4s ease forwards";
        } else {
            card.style.display = "none";
        }
    });
}
// Shyira muri script yawe isanzwe
function updateWhatsAppLink(shoeName) {
    const waLink = document.getElementById('whatsappLink');
    const phoneNumber = "250780000000"; // Shira hano numero yawe
    const message = `Muraho! Nshaka kubaza kuri izi nkweto: ${shoeName}. Ese murazifite?`;
    waLink.href = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
}

// Hamagara iyi function mu gihe umuntu akanze Add to Cart
// updateWhatsAppLink(shoe.name);
// 1. Filter by Category
function filterCategory(category, btn) {
    // Hindura imiterere ya button
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');

    let cards = document.querySelectorAll('.product-card');
    cards.forEach(card => {
        let title = card.querySelector('h3').innerText;
        if (category === 'all' || title.toLowerCase().includes(category.toLowerCase())) {
            card.style.display = "block";
            card.style.animation = "fadeIn 0.4s ease forwards";
        } else {
            card.style.display = "none";
        }
    });
}

// 2. Kosora Checkout ikoresheje WhatsApp nyayo niba ushaka ko bakwandikira
function orderViaWhatsApp() {
    if (cart.length === 0) return;
    
    let message = "Muraho SneakPeak! Ndashaka kugura izi nkweto:%0A%0A";
    let total = 0;
    
    cart.forEach((item, i) => {
        message += `${i+1}. ${item.name} - ${item.price.toLocaleString()} RWF%0A`;
        total += item.price;
    });
    
    message += `%0A*TOTAL: ${total.toLocaleString()} RWF*`;
    
    // Fungura WhatsApp
    window.open(`https://wa.me/250780000000?text=${message}`, '_blank');
}

// 3. Huza akabuto ko kwishyura na WhatsApp (Optional) cyangwa Fagitire
document.querySelector('#paymentForm').onsubmit = (e) => {
    e.preventDefault();
    const name = e.target.querySelector('input[type="text"]').value;
    document.getElementById('checkoutModal').style.display = 'none';
    showReceipt();
    // Nyuma ya 2 seconds fungura WhatsApp ngo bohereze order
    setTimeout(orderViaWhatsApp, 2000);
};
</script>
</body>
</html>